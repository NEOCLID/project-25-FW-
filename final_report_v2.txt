## 2025학년도 제14회 공과대학 창의설계축전 과제보고서 (v2.0)

---

### **작품명/연구명**
*   **국문:** IoT 기술을 활용한 실시간 압력 분산 및 원격 모니터링 스마트 휠체어 시트
*   **영문:** IoT-based Smart Wheelchair Seat for Real-time Pressure Distribution and Remote Monitoring

### **제작기간/연구기간**
*   2025년 03월 01일 ~ 2025년 08월 31일

### **작품/연구 내용요약**

휠체어 장기 사용자가 겪는 압박 궤양(욕창)은 지속적인 압력과 열악한 통풍 환경에서 기인하는 심각한 문제입니다. 본 과제는 이러한 문제를 공학적으로 해결하기 위해, 능동적인 압력 재분배 기능과 IoT 기반의 원격 모니터링 시스템을 통합한 스마트 휠체어 시트를 개발하였습니다. 시스템의 핵심은 좌/우로 분리된 두 개의 시트 플레이트가 6개의 압력 센서(FSR)와 2개의 초음파 거리 센서로부터 실시간 피드백을 받아, 2개의 DC 모터를 통해 독립적으로 각도를 조절하는 것입니다. 특정 부위에 압력이 설정된 임계값 이상으로 집중되면, 펌웨어는 자동으로 해당 부위의 시트를 들어 올려 압점을 이동시키고 혈액 순환을 유도합니다. 이 과정에서 거리 센서는 시트의 움직임이 설정된 범위(100mm)를 넘지 않도록 제어하여 시스템의 안정성을 보장하는 폐쇄 루프 제어 시스템을 구성합니다.

본 시스템의 가장 큰 특징은 모든 센서 데이터를 ESP32 컨트롤러를 통해 Wi-Fi로 백엔드 서버에 전송하는 IoT 기능입니다. Python FastAPI로 구축된 서버는 데이터를 수신하여 SQLite 데이터베이스에 저장하고, REST API를 통해 외부 애플리케이션에 최신 상태 정보를 제공합니다. 이를 통해 보호자나 의료진은 웹 기반 대시보드에서 실시간으로 압력 분포를 시각적으로 확인하고, 누적된 데이터를 통해 사용자의 건강 상태를 원격으로 추적할 수 있습니다. 본 창작물은 고가의 기성 제품과 달리, 저비용의 표준 부품으로 구현하여 가격 경쟁력을 확보하였으며, 향후 축적된 데이터를 의료 AI와 연계하여 개인 맞춤형 헬스케어 솔루션으로 발전시킬 수 있는 높은 확장성을 가집니다.

---

### **1. 과제의 목적, 동기 및 필요성**

#### **1.1. 과제 개요**
본 과제는 휠체어 사용자의 압박 궤양 예방을 위한 능동형 스마트 시트 시스템 개발을 목표로 한다. 시스템은 6개의 압력 센서, 2개의 거리 센서, 2개의 DC 모터를 ESP32 마이크로컨트롤러가 통합 제어하는 하드웨어와, 센서 데이터를 수집, 저장, 시각화하는 IoT 플랫폼(서버 및 웹 프론트엔드)으로 구성된다. 압력 센서의 실시간 측정값을 기반으로 양쪽 시트의 각도를 독립적으로 조절하여, 자동으로 사용자의 체중 부하를 재분배함으로써 욕창 발생의 핵심 원인을 제거한다.

#### **1.2. 제작 목적 및 동기**
압박 궤양은 환자의 신체적 고통은 물론, 치료 과정에서 발생하는 경제적, 시간적 부담이 큰 질환이다. 특히 거동이 불편한 환자의 경우, 간병인의 도움 없이는 자세를 바꾸기 어려워 문제 해결에 수동적으로 대처할 수밖에 없다. 이러한 문제에 깊이 공감하여, 공학적 자동화 기술을 통해 사용자가 의식하지 않아도 시스템이 스스로 압력을 관리해주는 능동적 솔루션을 제공하고자 본 과제를 시작하였다.

#### **1.3. 기존 기술/연구와의 차별성 및 창의성**
기존의 욕창 방지 에어 매트리스는 공기압을 이용하므로 반응 속도가 느리고, 부피가 커 휠체어 환경에 적용하기 부적합하며, 가격 또한 고가이다. 본 시스템은 다음과 같은 차별성을 가진다.
*   **능동적 기계식 제어:** DC 모터를 이용한 기계적 각도 조절 방식은 공기압 방식보다 빠르고 직관적인 압력 분산이 가능하다.
*   **비용 효율성:** ESP32, FSR 센서 등 표준화된 저비용 부품을 사용하여 시스템을 구축함으로써, 높은 가격 경쟁력을 확보하여 기술 보급의 장벽을 낮추었다.
*   **IoT 기반 데이터 활용:** 단순한 압력 분산을 넘어, 데이터를 수집하고 원격으로 모니터링하는 기능을 통합하였다. 이는 보호자에게 심리적 안정감을 제공하고, 의사에게는 환자 진단을 위한 객관적 데이터를 제공할 수 있는 창의적 접근 방식이다.

---

### **2. 과제의 수행방법 (Methodology)**

#### **2.1. 시스템 아키텍처**
본 시스템은 데이터의 흐름에 따라 4개의 계층으로 구성된다.
1.  **Sensing Layer:** 6개의 압력 센서와 2개의 거리 센서가 물리적 데이터를 아날로그 또는 디지털 신호로 수집한다.
2.  **Control Layer:** ESP32 펌웨어가 센서 신호를 입력받아, 내장된 제어 로직(압력 비교, 거리 제한)에 따라 L298N 모터 드라이버에 제어 신호를 출력한다.
3.  **Communication Layer:** ESP32의 Wi-Fi 모듈이 처리된 센서 데이터를 JSON 형식으로 직렬화하여, HTTP POST 요청을 통해 백엔드 서버로 전송한다.
4.  **Application Layer:** FastAPI 백엔드 서버가 데이터를 수신 및 저장하고, API를 통해 웹 프론트엔드에 데이터를 제공한다. 프론트엔드는 이를 사용자에게 시각적으로 표현한다.

#### **2.2. 하드웨어 선정 및 구성**
*   **MCU (ESP32 D1 R32):** 강력한 듀얼 코어 프로세서와 내장 Wi-Fi/Bluetooth 기능을 갖추고 있어, 센서 제어와 네트워크 통신을 동시에 처리하기에 최적의 부품으로 선정하였다.
*   **압력 센서 (FSR):** 저렴하고 구현이 간단하며, 압력의 상대적 변화를 측정하는 데 충분한 성능을 제공한다. 전압 분배기 회로를 구성하여 아날로그 핀으로 값을 측정하였다.
*   **거리 센서 (HC-SR04):** mm 단위의 정밀한 거리 측정이 가능하며, 초음파를 이용하므로 측정 대상의 색상이나 조도에 영향을 받지 않는다. 시트의 각도 제어를 위한 피드백 센서로 채택하였다.
*   **액추에이터 (JGB-520 DC 모터 & L298N 드라이버):** 12V 12RPM의 저속 고토크 DC 기어 모터는 시트를 부드럽고 안정적으로 들어 올리기에 적합하다. L298N은 2개의 모터를 독립적으로 제어할 수 있는 표준 H-브릿지 드라이버이다.

#### **2.3. 펌웨어 개발 (Arduino C++)**
펌웨어는 비동기적, 순차적 처리에 중점을 두어 개발되었다. `loop()` 함수는 `millis()`를 이용한 non-blocking delay를 통해 일정한 주기로 실행된다. HC-SR04 센서는 초음파 간섭을 피하기 위해 50ms의 지연을 두고 순차적으로 트리거된다. 압력 합산 값에는 `PRESSURE_TOLERANCE`라는 임계값을 두어, 두 값의 차이가 미미할 경우 모터가 불필요하게 작동하지 않도록 하는 히스테리시스(hysteresis) 구간을 설정하였다. 모든 센서 데이터는 JSON 형식으로 포맷팅되어 HTTP POST 요청의 body에 담겨 전송된다.

#### **2.4. 백엔드 및 프론트엔드 개발**
*   **Backend (Python, FastAPI):** 비동기 처리를 지원하여 빠른 속도를 자랑하는 FastAPI를 채택하였다. Pydantic 모델을 통해 수신 데이터의 유효성을 검증하며, `/ingest` API는 ESP32로부터 데이터를 받아 타임스탬프와 함께 SQLite DB에 저장한다. `/latest_seat_data` API는 DB에서 가장 최근의 기록을 조회하여 JSON으로 반환한다.
*   **Frontend (HTML/CSS/JS):** 순수 JavaScript의 `fetch` API를 사용하여 2초마다 백엔드에 데이터를 요청하는 폴링(polling) 방식으로 구현되었다. 수신된 JSON 데이터 중 'pressure' 배열을 파싱하여 6개의 UI 컴포넌트에 각각의 값과 상태(색상)를 업데이트하여 실시간 모니터링 기능을 제공한다.

---

### **3. 과제의 내용 (상세 설계)**

#### **3.1. 압력 분산 알고리즘**
알고리즘의 목표는 양쪽 둔부에 가해지는 압력의 불균형을 감지하고 해소하는 것이다. 
1.  `sumLeft = P1 + P2 + P3`, `sumRight = P4 + P5 + P6` 와 같이 좌/우 압력 센서 값의 합을 각각 계산한다.
2.  `if (sumLeft > sumRight + PRESSURE_TOLERANCE)`: 좌측 압력이 우측 압력보다 설정된 허용치 이상으로 높을 경우, 좌측 모터 작동 조건이 충족된다.
3.  `if (distanceLeft < TARGET_DISTANCE_MM)`: 모터 작동 조건이 충족되었을 때, 좌측 거리 센서의 측정값이 목표 높이보다 낮은지 확인한다.
4.  두 조건이 모두 참일 경우에만 좌측 모터를 작동시켜 시트를 들어 올린다. 우측 또한 동일한 로직이 대칭적으로 적용된다. 이로써 압력과 거리 두 가지 요소를 모두 고려한 제어가 완성된다.

#### **3.2. 폐쇄 루프 제어 시스템**
본 시스템에서 거리 센서는 제어 시스템의 안정성을 보장하는 핵심적인 피드백 요소이다. 압력 차이라는 조건만으로는 모터가 언제 멈춰야 할지 알 수 없어 시스템이 발산(overshoot)할 위험이 있다. 거리 센서는 현재 시트의 높이(상태)를 지속적으로 측정하여 컨트롤러에 전달하는 'Negative Feedback' 역할을 수행한다. 현재 상태가 목표 상태(TARGET_DISTANCE_MM)에 도달하면, 제어 입력(모터 작동)을 중단시켜 시스템이 목표값에 안정적으로 수렴하도록 만든다.

---

### **4. 기대효과 및 활용 방안**

*   **임상적 기대효과:** 자동화된 압력 재분배를 통해 욕창 발생률을 획기적으로 감소시키고, 환자의 삶의 질을 향상시킨다.
*   **사회적 기대효과:** 간병인의 육체적, 정신적 노동 부담을 경감시키고, 장기적으로 욕창 치료에 소요되는 사회적 의료 비용을 절감하는 데 기여한다.
*   **기술적 활용 방안:** 수집된 시계열 압력 데이터는 사용자의 자세, 활동 패턴 등을 분석하는 데 사용될 수 있는 귀중한 빅데이터이다. 이 데이터를 기반으로 AI 모델을 학습시켜, 특정 사용자에게 최적화된 압력 분산 패턴을 생성하거나, 척추측만증과 같은 자세 이상을 조기에 감지하는 진단 보조 시스템으로 활용할 수 있다.
*   **사업화 전략:** 초기에는 저비용의 하드웨어 판매로 시장에 진입하고, 이후 수집된 데이터를 기반으로 한 구독형 건강 분석 리포트 제공, 재활 기관 및 병원 대상의 B2B 데이터 솔루션 제공 등 부가 서비스 모델을 통해 지속 가능한 수익 구조를 창출할 수 있다.

---

### **5. 비용 분석 및 팀원 간 역할 분담**

#### **5.1. 예상 비용 분석 (Bill of Materials)**
| 부품명 | 수량 | 예상 단가 (원) | 합계 (원) | 비고 |
|---|---|---|---|---|
| ESP32 D1 R32 | 1 | 12,000 | 12,000 | 메인 컨트롤러 |
| FSR 압력 센서 | 6 | 3,000 | 18,000 | 압력 측정 |
| HC-SR04 거리 센서 | 2 | 2,000 | 4,000 | 높이 피드백 |
| JGB-520 DC 모터 | 2 | 15,000 | 30,000 | 12V 12RPM |
| L298N 모터 드라이버 | 1 | 3,000 | 3,000 | 모터 제어 |
| 12V 2A 어댑터 | 1 | 8,000 | 8,000 | 주 전원 공급 |
| PLA 필라멘트 | 1 | 20,000 | 20,000 | 시트 플레이트 제작 |
| 기타 (전선, 저항 등) | - | - | 5,000 | 소모품 |
| **총 합계** | | | **100,000** | |

#### **5.2. 팀원 간 역할 분담 (가상)**
| 성명 | 역할 | 상세 수행 내용 |
|---|---|---|
| 홍길동 | 프로젝트 총괄 / 백엔드 | 프로젝트 기획, 일정 관리, FastAPI 서버 구축, DB 설계 및 API 개발 |
| 김철수 | 하드웨어 / 펌웨어 | 회로 설계, 부품 선정, 센서 및 모터 테스트, Arduino C++ 펌웨어 개발 |
| 이영희 | 프론트엔드 / 문서화 | HTML/CSS/JS 기반 웹 대시보드 개발, 데이터 시각화, 최종 보고서 작성 |

---

### **6. 참고문헌**

1.  Espressif Systems, "ESP32-WROOM-32 Datasheet", Version 3.3, 2022.
2.  Cytron Technologies, "HC-SR04 Ultrasonic Sensor User's Manual", 2020.
3.  STMicroelectronics, "L298/A/P Dual Full-Bridge Driver Datasheet", 2013.
4.  Garvan, C., & O'Connor, J. J. (2021). "A review of pressure ulcer prevention strategies and technologies." *Journal of Wound Care*, 30(Sup9a), S4-S15.
